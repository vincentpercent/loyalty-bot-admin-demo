# Loyalty Bot & Admin (Demo)

Публичный срез проекта: Telegram-бот с бонусной программой и админкой на FastAPI для аналитики и ручных операций. В репозитории нет приватных токенов и чувствительных данных; для запуска нужны ваши переменные окружения (см. `env.example`).

## Архитектура
- `bot/` — aiogram-бот, бонусная логика, интеграция с YClients.
- `admin/` — FastAPI + Jinja2 админка, ручные операции, дашборды.
- `docker-compose.yml` — локальный запуск Postgres + сервисов.

## Подготовка окружения
1) Скопируйте `env.example` в `.env` и заполните свои токены/URL.
2) Проверьте, что в `.gitignore` скрыты `.env`, виртуальные окружения и локальные данные БД.
3) Запустите:
```
docker compose up --build
```
Админка по умолчанию на `http://localhost:8000`.

## Безопасность для публичного репо
- Нет реальных токенов или IP; используйте `.env`, не коммитьте его.
- Админ-учётки задаются через переменные окружения `ADMIN_USERNAME/ADMIN_PASSWORD`.
- В `docker-compose.yml` нет боевых адресов; при необходимости настраивайте `BOOKING_PROXY_URL` в `.env`.

## Что входит в демо
- Полный код бота и админки без секретов.
- Пример медиа для демонстрации сценариев.
- SQLAlchemy модели и миграция создаются на старте (`init_db`).

## Что не включено
- Файлы с реальными секретами, прод-ссылками и приватной аналитикой.
- Данные БД и личные медиаматериалы.

## Быстрый чек
- `/health` в админке возвращает `{"status": "ok"}`.
- Для авторизации в админке используйте значения из своего `.env`.

